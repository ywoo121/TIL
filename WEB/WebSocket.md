`date: 25.02.18`
# WebSocket
➡️ **실시간 양방향 통신**을 위해 웹 어플리케이션과 서버 간의 **지속적인 연결**을 제공하는 프로토콜
- 연결이 유지되는 동안 서버와 클라이언트가 수시로 데이터를 주고받을 수 있음
- 빠르고 효율적인 상호작용을 하는 웹 어플리케이션에 동작
- HTTP를 기반으로 초기 연결을 시작하지만, 연결이 성립되면 HTTP와는 다른 독립적인 데이터 교환 경로 사용
 
|장점|
|---|
|네트워크 지연 시간 최소화|
|실시간 피드백이 요구되는 앱의 성능 극대화|

|사용 분야|
|---|
|실시간 웹 게임|
|채팅 어플리케이션|
|금융 거래 모니터링 시스템|


## 사용 이유
> 실시간 웹을 만들기 위해서!

|사용 이유|설명|
|---|--|
|실시간 데이터 전송|연결이 활성화된 상태에는 언제든지 C-S 간 실시간으로 데이터 송수신 가능|
|연결 유지 비용 절감|한 번의 연결 후 지속적으로 데이터를 교환 가능 (네트워크 부하 & 지연 시간 감축 가능) ➡️ 서버의 자원을 효율적으로 사용|
||* HTTP: stateless -> 매번 새롭고 독립적인 요청|
|양방향 통신|클라이언트와 서버가 동시에 데이터를 보낼 수 있음|
|메세지 경계 존중|메세지를 전송할 때 메세지 경계를 명확히 하여, 전송된 각 메세지가 독립적이고 구분될 수 있도록 보장 (프레임 기반 프로토콜)|
||* 데이터 무결성 유지, 메세지의 의도를 명확하게 파악 가능|

## 사용 방법

|순서|설명|
|--|--|
|1|서버와 클라이언트 간의 WebSocket 연결 설정
|2|서버에서의 연결 수락
|3|데이터의 송수신
|4|연결 종료|


![Image](https://github.com/user-attachments/assets/7477aec4-57e5-45a0-887c-0c58b732c6a9)

0. **TCP 3-Way HandShake 진행됨**
1. **서버와 클라이언트 간의 WebSocket 연결 설정**
   - 클라이언트는 WebSocket URL을 사용하여 서버에 연결 요청을 보냄 
   - 이 URL은 일반적으로 "`ws`"(비암호화) 또는 "`wss`"(암호화) 프로토콜 사용
   - `ws://example.com:8000`
2. **서버에서의 연결 수락**
   - 서버는 클라이언트의 요청을 받고, 연결 조건을 검토한 후 연결을 수락하거나 거부함
3. **데이터의 송수신**
   - 연결이 설정되면 서버와 클라이언트는 **양방향**으로 메시지를 자유롭게 주고받을 수 있음
   - 메세지는 **프레임 형태**로 전송, 이를 통해 큰 데이터도 분할하여 전송할 수 있음
     - 프레임: WebSocket 통신에서 데이터가 전송되는 단위
4. **연결 종료**
   - 어느 한 쪽에서 연결을 종료하길 원할 때, 연결을 정상적으로 종료하는 과정을 진행
   - 서버 또는 클라이언트가 연결 종료를 요청하면, 상대방은 이를 확인하고 연결을 닫음
   - close frame을 전송해서 연결 종료를 함