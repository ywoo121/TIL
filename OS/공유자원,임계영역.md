`date: 25.02.10`

# 1️⃣ 공유자원
**공유자원 (Shared Resource)** : 여러 사용자나 프로세스가 동시에 접근하거나 사용하는 시스템 내의 자원  
ex. 파일 시스템, 네트워크 프린터, **메모리**, 데이터베이스

## 사용 이유
1. 리소스 낭비 방지
2. 효율성 극대화

## 경쟁 상태 (Race Condition)
: 공유 자원을 두 개 이상의 프로세스가 동시에 읽거나 쓰는 상황

### 경쟁 상태가 발생하는 경우
- 공유 데이터 접근
- 자원 예약
- 상태 업데이트


> 경쟁 관계에 있는 프로세스들이 존재하는 경우 다음과 같은 세 가지 제어 문제가 발생 가능
> - 상호 배제 (mutual exclusion)
> - 교착상태 (deadlock)
> - 기아 (starvation)

# 2️⃣ 임계영역 (Critical Section)
<img width="344" alt="Image" src="https://github.com/user-attachments/assets/f7879b80-18fa-4095-9689-32b2ce667663" />

공유 자원에 접근하는 각 프로세스 내부의 코드 영역으로, 다른 프로세스가 *해당 코드 영역을 수행하는 동안 수행하지 않아야 하는 코드 영역*
> 공유자원 vs 임계영역?
> - 공유자원: 여러 프로세스나 스레드가 접근할 수 있는 대상
> - 임계영역: 공유자원을 사용하려는 프로그램 내부의 코드 중에서도 **충돌이 발생할 가능성이 있는 부분**  
> => 공유자원 전체를 보호해야 하는 것이 아니라, 그 자원을 다루는 코드 중에서 위험한 부분만 보호하면 됨 (그러면 효율적 사용 가능)

### 예시
```c
int tmp = balance;
tmp += 100;
balance = tmp;
```
thread1과 thread2가 동시에 balance를 읽어서 동일한 값을 가져오면 하나의 입금 동작이 손실 가능성 있음 (-> race condition)  
➡️ 이를 해결하기 위해 1~3번 라인을 임계 영역으로 설정하고 동기화 매커니즘 (**mutex**, **semaphore**, **lock** 등)을 적용하여 한 번에 하나의 스레드만 실행되도록 보호

## 사용 이유
- 데이터 무결성 방지  
  : 임계 영역에서 한 번에 하나의 스레드/프로세스가 실행되도록 보장, 공유 자원이 잘못된 상태로 수정되지 않도록 함
- 경합 조건 방지   
  : 여러 스레드나 프로세스가 동시에 실행되면서 공유 자원에 비정상적인 동작이 발생하지 않도록 함